window.onload=function(){function t(t){function i(t){for(l="",j=0;j<t;j++)l+='<img src="assets/images/ratingstar.png" alt="" />';return l}var n,l,r=JSON.parse(t),d="",p="<div>",c='<div id="details">',g='<div id="map-canvas">';for(n=0;n<r.length;n++){var m,h=r[n].galleries;ratingstars=r[n].ratingstar,kms=r[n].nearkm,kms=kms?kms:"- ",m=0===h.length?"assets/images/noimg.png":encodeURI(r[n].galleries[0].img_path),d+='<li class="list-items"><a class="clearfix" style="display:block;" href="'+e+"detail.html?pid="+r[n].placeid+'">                        <section class="list-contents clearfix"><figure><img src="'+m+'" alt="" width="125" height="75" /></figure>                        <aside><h4>'+r[n].title+"</h4><p>"+r[n].address+'</p><figure class="ratingstars">'+i(ratingstars)+"</figure>"+kms+"Kms from city</aside>                        </section>                        </a>                        </li>"}console.log(r),$.each(r,function(t){function e(t){var e="";e+='<div id="jssor_1" style="position: relative; margin: 0 auto; top: 0px; left: 0px; width: 600px; height: 285px; overflow: hidden; visibility: hidden;">                            \t\t  <div data-u="slides" style="cursor: default; position: relative; top: 0px; left: 0px; width: 600px; height: 285px; overflow: hidden;">',t.forEach(function(t){encodeURI(t.img_path);e+='<div data-p="225.00" style="display: none;"><img data-u="image" src="'+t.img_path+'"/></div>'}),e+='<div data-p="225.00" data-po="80% 55%" style="display: none;"> <a href="http://theoreminc.net"><img data-u="image" src="assets/images/theorem.jpg"/></a></div>                             \t\t</div>                            \t\t  <div data-u="navigator" class="jssorb05" style="bottom:16px;right:16px;" data-autocenter="1">                            \t\t\t<div data-u="prototype" style="width:16px;height:16px;"></div>                            \t\t  </div>                            \t\t  <span data-u="arrowleft" class="jssora22l" style="top:0px;left:12px;width:40px;height:58px;" data-autocenter="2"></span>                             \t\t  <span data-u="arrowright" class="jssora22r" style="top:0px;right:12px;width:40px;height:58px;" data-autocenter="2"></span>                             \t\t</div>',$("#slider-content").append(e)}function i(){var e={center:u,zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP},i=new google.maps.Map(document.getElementById("map-canvas"),e);new google.maps.Marker({position:f,map:i,title:r[t].title})}if(r[t].placeid==s){var a=r[t].galleries,n=r[t].nearestplace,n=n?r[t].nearestplace.split("\r\n"):[];console.log(n),e(a),jssor_1_slider_init();var l="";l+="<div><ul>",n.forEach(function(t){l+="<li>"+t+"</li>"}),l+="</ul></div>",$(l).insertAfter("#id05 h2"),$(function(){var t=$("#id04 #details");console.log(t),$(t).each(function(t){var e=150;if($(this).html().length>e){var i=$(this).html().substr(0,e),a=$(this).html().substr(e);$(this).html(i+'<a href="#" class="read_more"><br/>Read More</a><span class="more_text" style="display:none;">'+a+"</span>"),$(this).find("a.read_more").click(function(t){t.preventDefault(),$(this).hide(),$(this).parents(".item").find(".more_text").show()})}})});var d=o(r[t].details);p+="<p style=\"color:#b65c39; font-family: 'Abel', sans-serif; font-weight:bold; padding:10px;\">"+r[t].title+"</p></div>",p+="</div>",c+="<div>"+$("<div/>").html(d).text()+"</div>",c+="</div>",g+="</div>";var m=r[t].lati,h=r[t].longi;m=m?r[t].lati.substr(0,7):"N/A",h=h?r[t].longi.substr(0,7):"N/A",console.log("selected page Latitude is "+m+" & Longitude is "+h);var u=new google.maps.LatLng(m,h),f=new google.maps.LatLng(m,h);google.maps.event.addDomListener(window,"load",i)}}),$(document).on("keyup","input[name='q']",function(){var t=$(this).val(),i=t.toLowerCase();console.log(i);var a="";""==i?$(".search-result").empty():($.each(r,function(t,s){function n(t){for(l="",j=0;j<t;j++)l+='<img src="assets/images/ratingstar.png" alt="" />';return l}var o,d=r[t].title.toLowerCase(),p=r[t].galleries;ratingstars=r[t].ratingstar,kms=r[t].nearkm,console.log(d),o=0===p.length?"assets/images/noimg.png":encodeURI(r[t].galleries[0].img_path),d.indexOf(i)!=-1&&(a+='<li class="list-items"><a class="clearfix" style="display:block;" href="'+e+"detail.html?pid="+r[t].placeid+'">                                        <section class="list-contents clearfix"><figure><img src="'+o+'" alt="" width="125" height="75" /></figure>                                        <aside><h4>'+r[t].title+"</h4><p>"+r[t].address+'</p><figure class="ratingstars">'+n(ratingstars)+"</figure>"+kms+"Kms from city</aside>                                        </section>                                        </a>                                        </li>")}),""==a&&(a+='<p style="color:#FFFFFF;margin-left:5px;margin-bottom:30px;">No results found.</p>'),$(".search-result").empty().append('<h2 style="color:#FFFFFF;margin:10px 5px;">Search results related to the keyword "'+t+'"</h2>'+a))}),a.indexOf("detail")!==-1?(document.getElementById("id02").innerHTML=p,document.getElementById("id03").innerHTML=g,document.getElementById("id04").innerHTML=c):document.getElementById("listings").innerHTML=d}var e,i=new XMLHttpRequest,a=location.href.split(".html")[0].split("/").pop();e=a.indexOf("detail")!==-1?a.split("detail")[0]:a;var s=location.href.slice(-16),n="assets/json/"+e+".json",o=function(){var t=/&(nbsp|amp|quot|lt|gt);/g,e={nbsp:String.fromCharCode(160),amp:"&",quot:'"',lt:"<",gt:">"},i=function(t,i){return e[i]};return function(e){return e.replace(t,i)}}();$("body").addClass(e),$('a[href="#id02"]').click(function(){$(".detailblock").css({padding:"50px 0px 0px 0px !important;"})}),console.log(a),console.log(e),console.log(s),console.log(n),i.onreadystatechange=function(){4==i.readyState&&t(i.responseText)},i.open("GET",n,!0),i.send()}();
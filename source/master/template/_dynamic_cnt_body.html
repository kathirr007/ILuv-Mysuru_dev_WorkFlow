var xmlhttp = new XMLHttpRequest();

if (location.pathname === "\finedine.html" ||  "\finedinedetail.html"){
		url = "master/json/dineRestaurants.json";
		url_link = "finedinedetail.html";		
	}
else if (location.pathname === "\history.html" ||  "\historydetail.html"){
		url = "master/json/historygeography.json";
		url_link = "historydetail.html";		
	}
else if (location.pathname === "\hotelslodging.html" ||  "\hotelslodging.html"){
		url = "master/json/hotelsLodging.json";
		url_link = "hotelslodging.html";
	}
else if (location.pathname === "\lifestyle.html" ||  "\lifestyledetail.html"){
		url = "master/json/lifestyleFashion.json";
		url_link = "lifestyledetail.html";
	}		
else if (location.pathname === "\placesofinterest.html" ||  "\placesofinterestdetail.html"){
		url = "master/json/placesInterest.json";
		url_link = "placesofinterestdetail.html";
	}
else {
		url = "master/json/upcomingEvents.json";
		url_link = "upcomingeventsdetail.html";
	}
 
xmlhttp.onreadystatechange=function() {
	if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
		myFunction(xmlhttp.responseText);
	}
}
xmlhttp.open("GET", url, true);
xmlhttp.send();


function myFunction(response) {
var arr = JSON.parse(response),
     i,
     pid,
     out = "<div>",
     out2 = "<div>",
     out3 = "<div id=\"details\">",   
     maps = "<div id=\"map-canvas\">";

pid = getPid();

  for(i = 0; i < arr.length; i++) {
    var gall = arr[i].galleries,
        thumbImage;
        // console.log(gall);
        if (gall.length === 0) {
          thumbImage = "master/images/noimg.png"; }
          else {
          thumbImage = encodeURI(arr[i].galleries[0].img_name);
          }
            out += "<a href=" + url_link + "?pid=" + arr[i].placeid + "\" style=\"text-decoration:none; \"><div id=\"placeblocks\"><div style=\"background-color:rgba(250, 250, 250, 1.0);\"><div class=\"text\"><ul><li style=\"width:40%;\"><img src=" + thumbImage + " alt=\"\" width=\"125\" height=\"75\" class=\"img\" style=\"border:2px solid #d1cece;\"></li>";
                
            out += "<li style=\"width:60%; line-height:18px;\"><span style=\"color:#b65c39; font-family: 'Abel', sans-serif; font-size:16px; font-weight:bold;\"> "+arr[i].title +"</span><br><span style=\"color:#222222; font-family: 'Abel', sans-serif; font-size:14px; \"> "+arr[i].address +"</span></li>";
                
            out += "</ul></div></div></div><div class=\"clear\"></div><div class=\"clear\"></div></a>";
                
  }
            out += "</div>";
